

  <mat-tab-group mat-stretch-tabs="false" mat-align-tabs="start" [(selectedIndex)]="selectedIndex">
    <form [formGroup]="invoiceForm">

    <mat-tab label="Party Details"> 
        <mat-card class="cardWithShadow m-15">
            <mat-card-content class="p-24">
                <div class="row">
                    <div class="col-4">
                        <mat-label class="mat-subtitle-2 f-w-600 m-b-1 d-block">Select a firm<span class="required">
                            *</span></mat-label>
                        <mat-form-field appearance="outline" class="w-100 m-t-8">
                            <mat-select value="no" formControlName="firm" placeholder="Select a firm" >
                                <mat-option *ngFor="let item of firmList" [value]="item">{{item.header}}</mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                    <div class="col-4">
                        <mat-label class="mat-subtitle-2 f-w-600 m-b-1 d-block">Select a party<span class="required">
                            *</span></mat-label>
                        <mat-form-field appearance="outline" class="w-100 m-t-8">
                            <mat-select value="no" formControlName="party" placeholder="Select a party">
                                <mat-option *ngFor="let item of partyList" [value]="item">{{item.partyName}}</mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                    <div class="col-4">
                        <mat-label class="mat-subtitle-2 f-w-600 m-b-1 d-block">Discount<span class="required">
                            *</span></mat-label>
                        <mat-form-field appearance="outline" class="w-100 m-t-8">
                            <input type="number" matInput formControlName="discount" placeholder= "Enter a discount" />
                        </mat-form-field>
                    </div>
                    <div class="col-4">
                          <mat-label class="mat-subtitle-2 f-w-600 m-b-1 d-block">S GST<span class="required">
                            *</span></mat-label>
                        <mat-form-field appearance="outline" class="w-100 m-t-8">
                            <input type="number" matInput required formControlName="sGST" placeholder="Enter a s GST" />
                        </mat-form-field>
                    </div>
                    <div class="col-4">
                          <mat-label class="mat-subtitle-2 f-w-600 m-b-1 d-block">C GST<span class="required">
                            *</span></mat-label>
                        <mat-form-field appearance="outline" class="w-100 m-t-8">
                            <input type="number" matInput required formControlName="cGST" placeholder="Enter a c GST" />
                        </mat-form-field>
                    </div>
                    <div class="col-4">
                          <mat-label class="mat-subtitle-2 f-w-600 m-b-1 d-block">Select a date<span class="required">
                            *</span></mat-label>
                        <mat-form-field appearance="outline" class="w-100 m-t-8">
                            <input matInput [matDatepicker]="picker" formControlName="date" required />
                            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                            <mat-datepicker #picker></mat-datepicker>
                        </mat-form-field>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <button mat-flat-button (click)="goToNextTab()" color="primary">Next</button>
                    </div>
                </div>
            </mat-card-content>
        </mat-card>   
    </mat-tab>
    <mat-tab label="Product Entry">
        <mat-card class="cardWithShadow m-15">
            <mat-card-content class="p-24">
                <div class="row">
                    <div class="col-3">
                         <mat-label class="mat-subtitle-2 f-w-600 m-b-8 d-block">Select a product<span class="required">
            *</span></mat-label>
                        <mat-form-field appearance="outline" class="w-100 m-t-8">
                            <mat-select value="no" formControlName="product" placeholder="Select a product">
                                <mat-option [value]="item"
                                    *ngFor="let item of productList">{{item.productName}}</mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                    <div class="col-2">
                         <mat-label class="mat-subtitle-2 f-w-600 m-b-8 d-block">Price<span class="required">
            *</span></mat-label>
                        <mat-form-field appearance="outline" class="w-100 m-t-8">
                            <input type="number" matInput formControlName="price" placeholder="Enter a price" />
                        </mat-form-field>
                    </div>
                    <div class="col-2">
                         <mat-label class="mat-subtitle-2 f-w-600 m-b-8 d-block">Qty<span class="required">
            *</span></mat-label>
                        <mat-form-field appearance="outline" class="w-100 m-t-8">
                            <input type="number" matInput formControlName="totalitem" placeholder="Enter a qty" />
                        </mat-form-field>
                    </div>
                    <div class="col-2">
                         <mat-label class="mat-subtitle-2 f-w-600 m-b-8 d-block">Defective Item<span class="required">
            *</span></mat-label>
                        <mat-form-field appearance="outline" class="w-100 m-t-8">
                            <input type="number" matInput formControlName="defectiveitem" placeholder="Enter a defective item" />
                        </mat-form-field>
                    </div>
                    <div class="col-2">
                         <mat-label class="mat-subtitle-2 f-w-600 m-b-8 d-block">Po Number<span class="required">
            *</span></mat-label>
                        <mat-form-field appearance="outline" class="w-100 m-t-8">
                            <input type="number" matInput formControlName="poNumber" placeholder="Enter a po Number" />
                        </mat-form-field>
                    </div>
                    <div class="col-1 productButton">
                        <mat-dialog-actions>
                            <button mat-flat-button [disabled]="!invoiceForm.valid" *ngIf="!editMode"
                                color="primary" (click)="addData()">Add</button>
                            <button mat-flat-button [disabled]="!invoiceForm.valid" *ngIf="editMode"
                                color="primary" (click)="updateData()">Edit</button>
                        </mat-dialog-actions>
                    </div>
                </div>
            </mat-card-content>
        </mat-card>

        <div class="table-responsive cardWithShadow m-15" *ngIf="data && data.length > 0; else noRecordsTemplate" >
            <table mat-table [dataSource]="dataSource" class="w-100">
                <ng-container matColumnDef="#">
                    <th mat-header-cell *matHeaderCellDef class="f-s-16 f-w-600">#</th>
                    <td mat-cell *matCellDef="let element">{{ element.id }}</td>
                </ng-container>
                <ng-container matColumnDef="firm">
                    <th mat-header-cell *matHeaderCellDef class="f-s-16 f-w-600">Firm Name</th>
                    <td mat-cell *matCellDef="let element" class="f-s-14">
                        {{ element.firm.header }}
                    </td>
                </ng-container>
                <ng-container matColumnDef="Party">
                    <th mat-header-cell *matHeaderCellDef class="f-s-16 f-w-600">
                        Party Name
                    </th>
                    <td mat-cell *matCellDef="let element" class="f-s-14">
                        {{ element.party.partyName }}
                    </td>
                </ng-container>

                <ng-container matColumnDef="PoNumber">
                    <th mat-header-cell *matHeaderCellDef class="f-s-16 f-w-600">
                        Po Number
                    </th>
                    <td mat-cell *matCellDef="let element" class="f-s-14">
                        {{ element.poNumber }}
                    </td>
                </ng-container>
                <ng-container matColumnDef="product">
                    <th mat-header-cell *matHeaderCellDef class="f-s-16 f-w-600">
                        Product
                    </th>
                    <td mat-cell *matCellDef="let element" class="f-s-14">
                        {{ element.product.productName}}
                    </td>
                </ng-container>
                <ng-container matColumnDef="TotalItem">
                    <th mat-header-cell *matHeaderCellDef class="f-s-16 f-w-600">
                        Qty
                    </th>
                    <td mat-cell *matCellDef="let element" class="f-s-14">
                        {{ element.totalitem }}
                    </td>
                </ng-container>
    
                <ng-container matColumnDef="Price">
                    <th mat-header-cell *matHeaderCellDef class="f-s-16 f-w-600">
                        Price
                    </th>
                    <td mat-cell *matCellDef="let element" class="f-s-14">
                        {{ element.price }}
                    </td>
                </ng-container>

                <ng-container matColumnDef="Defectiveitem">
                    <th mat-header-cell *matHeaderCellDef class="f-s-16 f-w-600">
                        Defectiveitem
                    </th>
                    <td mat-cell *matCellDef="let element" class="f-s-14">
                        {{ element.defectiveitem }}
                    </td>
                </ng-container>
                <ng-container matColumnDef="FinalAmount">
                    <th mat-header-cell *matHeaderCellDef class="f-s-16 f-w-600">
                        FinalAmount
                    </th>
                    <td mat-cell *matCellDef="let element" class="f-s-14">
                        {{ element.finalAmount }}
                    </td>
                </ng-container>

                <ng-container matColumnDef="action">
                    <th mat-header-cell *matHeaderCellDef class="f-s-16 f-w-600">
                        Action
                    </th>
                    <td mat-cell *matCellDef="let element" class="action-link">
                        <a class="m-r-10 cursor-pointer"><i-tabler name="edit" (click)="edit(element)"
                                class="icon-18"></i-tabler></a>
                        <a class="m-r-10 cursor-pointer">
                            <i-tabler name="trash" (click)="deletedata(element.id)" class="icon-18"></i-tabler>
                        </a>
                    </td>
                </ng-container>
    
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
            </table>
            <div style="position: relative;">
                <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
            </div>
            <div class="GenerateInvoice">
                <button mat-flat-button color="primary" (click)="generateInvoice()">Generate Invoice</button>
            </div>
        </div>
        <ng-template #noRecordsTemplate>
            <div class="no-records text-center">
              <span>
                No records found
              </span>
            </div>
          </ng-template>
    </mat-tab>
    </form>
  </mat-tab-group>